<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- Standard Favicon -->
    <link rel="icon" type="image/png" href="./assets/Color_Logo_Blue.png" />

    <!-- For Apple devices -->
    <link
      rel="apple-touch-icon"
      sizes="512x512"
      href="./assets/Color_Logo_Blue.png"
    />

    <!-- For general use, like on Android -->
    <link
      rel="icon"
      type="image/png"
      sizes="256x256"
      href="./assets/Color_Logo_Blue.png"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="512x512"
      href="./assets/Color_Logo_Blue.png"
    />

    <!-- Web App Manifest -->
    <link rel="manifest" href="/site.webmanifest" />
    <title>DRN Rescue Flow - Step 5</title>
    <link rel="stylesheet" href="css/bootstrap.min.css" />
    <link rel="stylesheet" href="style.css" />
    <link rel="stylesheet" href="./globals.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css"
    />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Bebas+Neue&display=swap"
      rel="stylesheet"
    />
    <style>
      /* Modal styles */
      .modal {
        display: none;
        position: fixed;
        z-index: 1;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        overflow: auto;
        background-color: rgba(0, 0, 0, 0.7);
      }

      .modal-content {
        background-color: #fff;
        margin: 15% auto;
        padding: 20px;
        border: 1px solid #888;
        width: 50%;
        text-align: center;
      }

      .close {
        color: #aaa;
        float: right;
        font-size: 28px;
        font-weight: bold;
      }

      .close:hover,
      .close:focus {
        color: black;
        text-decoration: none;
        cursor: pointer;
      }
    </style>
    <script>
      function toggleFabMenu() {
        const overlay = document.getElementById("overlay");
        const fabMenuContainer = document.getElementById("fabMenuContainer");
        const fabLogo = document.getElementById("fabLogo"); // Get the logo by its ID
        const fabClose = document.getElementById("fabClose"); // Get the 'X' span by its ID
        const fabContainer = document.getElementById("fabContainer"); // Get the 'X' span by its ID
        const fab = document.getElementById("fab"); // Get the 'X' span by its ID

        // Toggle the active class on the overlay and the FAB menu
        overlay.classList.toggle("active");
        fabMenuContainer.classList.toggle("active");

        // Check if the menu is active or not
        // Check if the menu is active or not
        if (fabMenuContainer.classList.contains("active")) {
          // Menu is active, show 'X' and hide logo
          fabLogo.style.display = "none"; // Hide the logo
          fabClose.style.display = "block"; // Show the 'X'
        } else {
          // Menu is not active, hide 'X' and show logo
          fabLogo.style.display = "block"; // Show the logo
          fabClose.style.display = "none"; // Hide the 'X'
        }
      }

      function reportLostDisc() {
        window.location.href = "reportLostDisc.html";
      }
      function requestCourse() {
        window.location.href = "requestCourse.html";
      }
      function openSettings() {
        window.location.href = "settings.html";
      }
    </script>
    <script>
      // Function to get the value of a query parameter from the URL
      function getQueryParam(parameterName) {
        const urlParams = new URLSearchParams(window.location.search);
        return urlParams.get(parameterName);
      }
    </script>
    <script>
      // Function to open the modal dialog
      function reportLostDisc() {
        // const parameterModal = document.getElementById("parameterModal");
        // const parameterList = document.getElementById("parameterList");

        const stateInputValue = getQueryParam("state");
        const courseInputValue = getQueryParam("course");
        const phoneInputValue = getQueryParam("phone");
        const firstInitialInputValue = getQueryParam("initial");
        const lastNameInputValue = getQueryParam("name");
        const discBrandInputValue = getQueryParam("brand");
        const colorValue = getQueryParam("color");

        window.location.href = `/reportLostDisc.html?state=${stateInputValue}&course=${courseInputValue}&phone=${phoneInputValue}&initial=${firstInitialInputValue}&name=${lastNameInputValue}&brand=${discBrandInputValue}&color=${colorValue}`;

        // Construct the content for the modal
        // parameterList.innerHTML = `
        //         <p>State: ${stateInputValue}</p>
        //         <p>Course: ${courseInputValue}</p>
        //         <p>Phone: ${phoneInputValue}</p>
        //         <p>First Initial: ${firstInitialInputValue}</p>
        //         <p>Last Name: ${lastNameInputValue}</p>
        //         <p>Disc Brand: ${discBrandInputValue}</p>
        //         <p>Color: ${colorValue}</p>
        //     `;

        // // Display the modal
        // parameterModal.style.display = "block";
      }

      // Function to close the modal dialog
      function closeParameterModal() {
        const parameterModal = document.getElementById("parameterModal");
        parameterModal.style.display = "none";
      }

      function goBack() {
        if (document.referrer.startsWith(window.location.origin)) {
          window.history.back();
        } else {
          // Handle the case when there is no history to go back to
          // For example, redirect to a different page or display an error message
          console.log("No page on the same domain to go back to.");
        }
      }

      function refresh() {
        window.location.href = "/";
      }

      function goToInventory() {
        window.location.href = "/searchInventory.html";
      }
    </script>
  </head>
  <body>
    <section class="main-section text-center">
      <div class="container">
        <i
          class="fa fa-arrow-left"
          style="
            position: absolute;
            top: 30px;
            left: 20px;
            font-size: 30px;
            color: white;
            padding: 5px;
          "
          aria-hidden="true"
          onclick="goBack()"
        ></i>
        <div class="d-flex align-items-center flex-column text-center mb-3">
          <img
            class="weblogo"
            src="./assets/logo.png"
            alt="logo"
            onclick="refresh()"
          />

          <div class="chat-box d-flex align-items-center mt-3">
            <img class="me-2" src="./assets/chat.svg" alt="chat" />
            <h4 class="m-0 me-2 text-white">OPT IN STATUS</h4>
            <h4 class="m-0 confirmd">CONFIRMED</h4>
          </div>
        </div>
        <div
          class="rescue d-flex align-items-center flex-column text-center mb-2"
        >
          <h3 class="m-0 text-white">
            0/10 RESCUE FLOW <span class="fw-light">wizard</span>
          </h3>
          <h2 class="m-0 mt-2 text-white">
            So maybe it's not <span class="overtext">Perfect</span>.
          </h2>
        </div>

        <p class="text-white px-2 mt-4 mb-4" style="font-weight: unset" ;>
          But it never gives up. Submit the information you used in the wizard
          to report your disc lost and be notified if the wizard finds it, so it
          can reunite you.
        </p>

        <button
          class="failurebutton text-white mb-4 mt-2"
          onclick="reportLostDisc()"
        >
          Report my Disc Lost and Help the Wizard
        </button>
        <div class="pb-5">
          <button class="rememberbtn fw-light" onclick="goToInventory()">
            Fine, I'll do it myself
          </button>
        </div>
      </div>
    </section>

    <div class="fab-menu-container" id="fabMenuContainer">
      <div class="fab-menu" id="fabMenu">
        <div class="fab-menu-item">
          <a
            class="fab-menu-item-text-left"
            href="/reportLostDisc.html"
            style="text-decoration: none"
            >Report <br />
            Lost Disc</a
          >
          <i class="fa-regular fa-flag" onclick="reportLostDisc()"></i>
        </div>
        <div class="fab-menu-item">
          <a
            class="fab-menu-item-text"
            href="/requestCourse.html"
            style="text-decoration: none"
            >Request a Course</a
          >
          <i class="fa-solid fa-location-dot" onclick="requestCourse()"></i>
        </div>
        <div class="fab-menu-item">
          <i class="fa-solid fa-gear" onclick="openSettings()"></i>
          <a
            class="fab-menu-item-text-right"
            href="/settings.html"
            style="text-decoration: none"
            >Settings</a
          >
        </div>
      </div>
    </div>

    <footer class="footer">
      <div class="overlay" id="overlay" onclick="toggleFabMenu()"></div>
      <div class="container">
        <div class="footer-content row">
          <div class="col-2">
            <a class="d-flex align-items-center flex-column" href="/home.html">
              <span class="img">
                <img src="./assets/home.png" alt="home" />
              </span>
              <span>HOME</span>
            </a>
          </div>
          <div class="col-2">
            <a
              class="d-flex align-items-center flex-column"
              href="/searchInventory.html"
            >
              <span class="img">
                <img
                  class="search"
                  src="./assets/search.png"
                  alt="home"
                  width="18"
                />
              </span>
              <span>SEARCH ALL</span>
            </a>
          </div>
          <div class="col-2">
            <a class="d-flex align-items-center flex-column" href="/store.html">
              <span class="img">
                <img src="./assets/disk-store.png" alt="home" />
              </span>
              <span>DISC STORE</span>
            </a>
          </div>
          <div class="col-2">
            <a
              class="d-flex align-items-center flex-column"
              href="/courses.html"
            >
              <span class="img">
                <img src="./assets/courses.png" alt="home" />
              </span>
              <span>COURSES</span>
            </a>
          </div>
        </div>
        <!-- <button class="btnaction"><img class="btnlogo" src="./assets/app_center_btn_logo.png" alt="btnlogo"></button> -->
      </div>
    </footer>

    <div class="fab-container" onclick="toggleFabMenu()" id="fabContainer">
      <button class="fab" id="fab">
        <img
          src="./assets/app_center_btn_logo.png"
          alt="Disc Rescue Network Logo"
          class="logo-fab"
          id="fabLogo"
        />
        <span id="fabClose" style="display: none; z-index: 15">X</span>
        <!-- Hidden by default -->
      </button>
    </div>

    <!-- Modal Dialog -->
    <div id="parameterModal" class="modal">
      <div class="modal-content">
        <span class="close" onclick="closeParameterModal()">&times;</span>
        <h2>Parameters</h2>
        <div id="parameterList"></div>
      </div>
    </div>
  </body>
</html>
